{
  "BIP": "320",
  "Title": "nVersion bits for general purpose use",
  "Author": "BtcDrak <btcdrak@gmail.com>",
  "Comments-Summary": "No comments yet.",
  "Comments-URI": "https://github.com/bitcoin/bips/wiki/Comments:BIP-0320",
  "Status": "Draft",
  "Type": "Standards Track",
  "Created": "2018-03-01",
  "License": "BSD-3-Clause",
  "sections": [
    {
      "header": "Abstract",
      "content": "This BIP reserves 16 bits of the block header nVersion field for general\npurpose use and removes their meaning for the purpose of version bits\nsoft-fork signalling.\n\nThe key words \\\"MUST\\\", \\\"MUST NOT\\\", \\\"REQUIRED\\\", \\\"SHALL\\\", \\\"SHALL\nNOT\\\", \\\"SHOULD\\\", \\\"SHOULD NOT\\\", \\\"RECOMMENDED\\\", \\\"MAY\\\", and\n\\\"OPTIONAL\\\" in this document are to be interpreted as described in RFC\n2119."
    },
    {
      "header": "Motivation",
      "content": "There are a variety of things that miners may desire to use some of the\nnVersion field bits for. However, due to their use to coordinate miner\nactivated soft-forks, full node software will generate false warnings\nabout unknown soft forks if those bits are used for non soft fork\nsignalling purposes. By reserving bits from the nVersion field for\ngeneral use, node software can be updated to ignore those bits and\ntherefore will not emit false warnings. Reserving 16 bits for general\nuse leaves enough for 13 parallel soft-forks using version bits."
    },
    {
      "header": "Example Uses {#example_uses}",
      "content": "The following are example cases that would benefit from using some of\nthe bits from the nVersion field. This list is not exhaustive.\n\nBitcoin mining hardware currently can exhaust the 32 bit nonce field in\nless than 200ms requiring the controller to distribute new jobs very\nfrequently to each mining chip consuming a lot of bandwidth and CPU\ntime. This can be greatly reduced by rolling more bits. Rolling too many\nbits from nTime is not ideal because it may distort the timestamps over\na longer period.\n\nVersion-rolling AsicBoost requires two bits from the nVersion field to\ncalculate 4-way collisions. Any two bits can be used and mining\nequipment can negotiate which bits are to be used with mining pools via\nthe Stratum \\\"version-rolling\\\" extension."
    },
    {
      "header": "Specification",
      "content": "Sixteen bits from the block header nVersion field, starting from 13 and\nending at 28 inclusive (0x1fffe000), are reserved for general use and\nremoved from BIP8 and BIP9 specifications. A mask of 0xe0001fff should\nbe applied to nVersion bits so bits 13-28 inclusive will be ignored for\nsoft-fork signalling and unknown soft-fork warnings.\n\nThis specification does not reserve specific bits for specific purposes."
    },
    {
      "header": "Reference Implementation {#reference_implementation}",
      "content": "<https://github.com/btcdrak/bitcoin/commit/d12516e136d4a8952904a13eedc9f4225f35dc3b>"
    },
    {
      "header": "Backwards Compatibility {#backwards_compatibility}",
      "content": "Non-upgraded nodes will interpret the reserved bits of this proposal as\nsignals for soft forks, and may additionally activate the warning system\nfor unknown soft forks.\n\nThis proposal does not require a soft fork to implement.\n\nAt the time of writing no known soft forks are pending using any of 16\nbits reserved in this BIP, and given that a non-trivial percentage of\nthe hashrate is already making uses of those bits, future soft forks\nSHOULD NOT utilise those bits for activation signalling."
    },
    {
      "header": "Acknowledgements",
      "content": "Timo Hanke and Sergio Lerner for originally proposing 15-bit extra\nnNonce2."
    },
    {
      "header": "References",
      "content": "[BIP8](bip-0008.mediawiki \"wikilink\")\n\n[BIP9](bip-0009.mediawiki \"wikilink\")\n\n[AsicBoost white paper](https://arxiv.org/pdf/1604.00575.pdf)\n\n[Blockheader Extra nNonce2\nproposal](https://github.com/BlockheaderNonce2/bitcoin/wiki)\n\n[Stratum protocol extension BIP for\nversion-rolling](https://github.com/slushpool/stratumprotocol/blob/master/stratum-extensions.mediawiki)"
    },
    {
      "header": "Copyright",
      "content": "This document is dual licensed as BSD 3-clause, and Creative Commons CC0\n1.0 Universal."
    }
  ]
}